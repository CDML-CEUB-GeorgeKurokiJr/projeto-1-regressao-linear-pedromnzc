<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR" xml:lang="pt-BR"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pedro Muniz Cherulli">
<meta name="keywords" content="R, Python, Ciência de Dados, Deep Learning, Data Processing">

<title>Projeto 1 - Tratamento de Dados WECs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="data_processing_files/libs/clipboard/clipboard.min.js"></script>
<script src="data_processing_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="data_processing_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="data_processing_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="data_processing_files/libs/quarto-html/popper.min.js"></script>
<script src="data_processing_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="data_processing_files/libs/quarto-html/anchor.min.js"></script>
<link href="data_processing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_processing_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="data_processing_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="data_processing_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="data_processing_files/libs/bootstrap/bootstrap-4d7f0bce1131f3e5f9547cd857cfbfc8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#dicionário-de-variáveis-dataset-wec" id="toc-dicionário-de-variáveis-dataset-wec" class="nav-link active" data-scroll-target="#dicionário-de-variáveis-dataset-wec"><span class="header-section-number">1</span> Dicionário de Variáveis (Dataset WEC)</a></li>
  <li><a href="#introdução-e-objetivo" id="toc-introdução-e-objetivo" class="nav-link" data-scroll-target="#introdução-e-objetivo"><span class="header-section-number">2</span> Introdução e Objetivo</a>
  <ul class="collapse">
  <li><a href="#detalhamento-do-contexto-e-desafios" id="toc-detalhamento-do-contexto-e-desafios" class="nav-link" data-scroll-target="#detalhamento-do-contexto-e-desafios"><span class="header-section-number">2.1</span> Detalhamento do Contexto e Desafios</a>
  <ul class="collapse">
  <li><a href="#o-efeito-de-interação-hidrodinâmica" id="toc-o-efeito-de-interação-hidrodinâmica" class="nav-link" data-scroll-target="#o-efeito-de-interação-hidrodinâmica"><span class="header-section-number">2.1.1</span> O Efeito de Interação Hidrodinâmica</a></li>
  <li><a href="#por-que-a-engenharia-de-atributos-é-vital-para-regressão-linear" id="toc-por-que-a-engenharia-de-atributos-é-vital-para-regressão-linear" class="nav-link" data-scroll-target="#por-que-a-engenharia-de-atributos-é-vital-para-regressão-linear"><span class="header-section-number">2.1.2</span> Por que a Engenharia de Atributos é Vital para Regressão Linear?</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#pipeline-de-processamento-e-engenharia-de-atributos" id="toc-pipeline-de-processamento-e-engenharia-de-atributos" class="nav-link" data-scroll-target="#pipeline-de-processamento-e-engenharia-de-atributos"><span class="header-section-number">3</span> Pipeline de Processamento e Engenharia de Atributos</a>
  <ul class="collapse">
  <li><a href="#leitura-e-consolidação-dos-dados" id="toc-leitura-e-consolidação-dos-dados" class="nav-link" data-scroll-target="#leitura-e-consolidação-dos-dados"><span class="header-section-number">3.1</span> Leitura e Consolidação dos Dados</a></li>
  <li><a href="#remoção-de-colunas-de-potência-individual" id="toc-remoção-de-colunas-de-potência-individual" class="nav-link" data-scroll-target="#remoção-de-colunas-de-potência-individual"><span class="header-section-number">3.2</span> Remoção de Colunas de Potência Individual</a></li>
  <li><a href="#análise-exploratória-e-visualização" id="toc-análise-exploratória-e-visualização" class="nav-link" data-scroll-target="#análise-exploratória-e-visualização"><span class="header-section-number">3.3</span> Análise Exploratória e Visualização</a>
  <ul class="collapse">
  <li><a href="#conclusões-pós-análise-superficiais" id="toc-conclusões-pós-análise-superficiais" class="nav-link" data-scroll-target="#conclusões-pós-análise-superficiais"><span class="header-section-number">3.3.1</span> Conclusões pós Análise Superficiais</a></li>
  </ul></li>
  <li><a href="#visualização-da-disposição-dos-wecs" id="toc-visualização-da-disposição-dos-wecs" class="nav-link" data-scroll-target="#visualização-da-disposição-dos-wecs"><span class="header-section-number">3.4</span> Visualização da Disposição dos WECs</a>
  <ul class="collapse">
  <li><a href="#o-que-é-um-wec" id="toc-o-que-é-um-wec" class="nav-link" data-scroll-target="#o-que-é-um-wec"><span class="header-section-number">3.4.1</span> O que é um <strong>WEC</strong>?</a></li>
  </ul></li>
  <li><a href="#ganhos-e-insights-possíveis-com-diferentes-arranjos" id="toc-ganhos-e-insights-possíveis-com-diferentes-arranjos" class="nav-link" data-scroll-target="#ganhos-e-insights-possíveis-com-diferentes-arranjos"><span class="header-section-number">3.5</span> Ganhos e insights possíveis com diferentes arranjos:</a></li>
  </ul></li>
  <li><a href="#criação-de-novas-features" id="toc-criação-de-novas-features" class="nav-link" data-scroll-target="#criação-de-novas-features"><span class="header-section-number">4</span> Criação de Novas Features</a>
  <ul class="collapse">
  <li><a href="#distância-euclidiana-entre-wecs" id="toc-distância-euclidiana-entre-wecs" class="nav-link" data-scroll-target="#distância-euclidiana-entre-wecs"><span class="header-section-number">4.1</span> Distância Euclidiana entre WECs</a>
  <ul class="collapse">
  <li><a href="#o-que-é" id="toc-o-que-é" class="nav-link" data-scroll-target="#o-que-é"><span class="header-section-number">4.1.1</span> O que é?</a></li>
  <li><a href="#fórmula-matemática" id="toc-fórmula-matemática" class="nav-link" data-scroll-target="#fórmula-matemática"><span class="header-section-number">4.1.2</span> Fórmula Matemática</a></li>
  <li><a href="#como-o-código-escolhe-os-pontos" id="toc-como-o-código-escolhe-os-pontos" class="nav-link" data-scroll-target="#como-o-código-escolhe-os-pontos"><span class="header-section-number">4.1.3</span> Como o código escolhe os pontos?</a></li>
  <li><a href="#estatísticas-derivadas" id="toc-estatísticas-derivadas" class="nav-link" data-scroll-target="#estatísticas-derivadas"><span class="header-section-number">4.1.4</span> Estatísticas derivadas</a></li>
  <li><a href="#por-que-é-importante" id="toc-por-que-é-importante" class="nav-link" data-scroll-target="#por-que-é-importante"><span class="header-section-number">4.1.5</span> Por que é importante?</a></li>
  <li><a href="#visualização-intuitiva" id="toc-visualização-intuitiva" class="nav-link" data-scroll-target="#visualização-intuitiva"><span class="header-section-number">4.1.6</span> Visualização Intuitiva</a></li>
  </ul></li>
  <li><a href="#distância-de-cada-wec-ao-centroide" id="toc-distância-de-cada-wec-ao-centroide" class="nav-link" data-scroll-target="#distância-de-cada-wec-ao-centroide"><span class="header-section-number">4.2</span> Distância de cada WEC ao Centroide</a>
  <ul class="collapse">
  <li><a href="#o-que-é-o-centroide" id="toc-o-que-é-o-centroide" class="nav-link" data-scroll-target="#o-que-é-o-centroide"><span class="header-section-number">4.2.1</span> O que é o centroide?</a></li>
  <li><a href="#distância-de-cada-wec-até-o-centroide" id="toc-distância-de-cada-wec-até-o-centroide" class="nav-link" data-scroll-target="#distância-de-cada-wec-até-o-centroide"><span class="header-section-number">4.2.2</span> Distância de cada WEC até o centroide</a></li>
  <li><a href="#estatísticas-derivadas-1" id="toc-estatísticas-derivadas-1" class="nav-link" data-scroll-target="#estatísticas-derivadas-1"><span class="header-section-number">4.2.3</span> Estatísticas derivadas</a></li>
  <li><a href="#por-que-é-diferente-da-distância-entre-pares" id="toc-por-que-é-diferente-da-distância-entre-pares" class="nav-link" data-scroll-target="#por-que-é-diferente-da-distância-entre-pares"><span class="header-section-number">4.2.4</span> Por que é diferente da distância entre pares?</a></li>
  <li><a href="#visualização-intuitiva-1" id="toc-visualização-intuitiva-1" class="nav-link" data-scroll-target="#visualização-intuitiva-1"><span class="header-section-number">4.2.5</span> Visualização Intuitiva</a></li>
  </ul></li>
  <li><a href="#matriz-de-correlação" id="toc-matriz-de-correlação" class="nav-link" data-scroll-target="#matriz-de-correlação"><span class="header-section-number">4.3</span> “Matriz de Correlação”</a>
  <ul class="collapse">
  <li><a href="#interpretação-geral" id="toc-interpretação-geral" class="nav-link" data-scroll-target="#interpretação-geral"><span class="header-section-number">4.3.1</span> Interpretação Geral</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#exportação-da-base-de-dados-tratada" id="toc-exportação-da-base-de-dados-tratada" class="nav-link" data-scroll-target="#exportação-da-base-de-dados-tratada"><span class="header-section-number">5</span> Exportação da Base de Dados Tratada</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Projeto 1 - Tratamento de Dados WECs</h1>
<p class="subtitle lead">Wave Energy Converters Dataset</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Autor</div>
  <div class="quarto-title-meta-heading">Afiliação</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Pedro Muniz Cherulli <a href="https://orcid.org/0009-0000-0282-5776" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            UniCEUB – Ciência de Dados
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Data de Publicação</div>
    <div class="quarto-title-meta-contents">
      <p class="date">23 de fevereiro de 2026</p>
    </div>
  </div>
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Palavras-chave</div>
    <p>R, Python, Ciência de Dados, Deep Learning, Data Processing</p>
  </div>
</div>

</header>


<section id="dicionário-de-variáveis-dataset-wec" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Dicionário de Variáveis (Dataset WEC)</h1>
<p>As colunas presentes na base de dados bruta e processada são descritas a seguir:</p>
<ul>
<li><code>X1</code> a <code>X16</code>: Coordenadas cartesianas no eixo horizontal (<span class="math inline">\(X\)</span>) para cada um dos 16 conversores de energia das ondas no arranjo.</li>
<li><code>Y1</code> a <code>Y16</code>: Coordenadas cartesianas no eixo vertical (<span class="math inline">\(Y\)</span>) para cada um dos 16 conversores de energia das ondas no arranjo.</li>
<li><code>P1</code> a <code>P16</code>: Potência individual gerada por cada conversor (geralmente removidas após a consolidação para focar na performance do grupo).</li>
<li><strong><code>Powerall</code></strong>: Variável alvo (target) que representa a potência total líquida gerada pelo arranjo de 16 WECs, considerando as interações hidrodinâmicas.</li>
<li><strong><code>scenario</code></strong>: Identificador da localização geográfica e condições metereológicas do dataset (ex.: <em>Adelaide</em>, <em>Tasmania</em>, <em>Sydney</em> e <em>Perth</em>).</li>
</ul>
<p>O dataset abrange quatro localizações reais na costa australiana, cada uma com características distintas de espectro de onda:</p>
<ol type="1">
<li><strong>Adelaide:</strong> Águas mais rasas e regime de ondas regular.</li>
<li><strong>Tasmania:</strong> Alta energia e condições climáticas severas.</li>
<li><strong>Sydney:</strong> Regime de ondas moderado.</li>
<li><strong>Perth:</strong> Influência de ventos consistentes e swells de longo período.</li>
</ol>
<p>Área de Ocupação: Todas as coordenadas (<span class="math inline">\(X, Y\)</span>) estão contidas dentro de uma área delimitada de 566m x 566m, definindo o espaço operacional da fazenda de ondas.</p>
<p><span class="citation" data-cites="wave_energy_converters_494">Neshat; Wagner; Alexander (<a href="#ref-wave_energy_converters_494" role="doc-biblioref">2018</a>)</span></p>
<hr>
</section>
<section id="introdução-e-objetivo" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Introdução e Objetivo</h1>
<p>Este projeto foca no processamento e engenharia de atributos de um dataset de <strong>Conversores de Energia das Ondas (WECs - Wave Energy Converters)</strong>. O objetivo principal é transformar coordenadas espaciais (<span class="math inline">\(X, Y\)</span>) em um formato otimizado para modelos de <em>Regressão linear</em>, extraindo métricas geométricas que descrevam a disposição física dos conversores no oceano.</p>
<p>A meta é criar um pipeline de dados para que o algoritmo de regressão consiga prever a eficiência do arranjo para cada cenário geográfico.</p>
<section id="detalhamento-do-contexto-e-desafios" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="detalhamento-do-contexto-e-desafios"><span class="header-section-number">2.1</span> Detalhamento do Contexto e Desafios</h2>
<section id="o-efeito-de-interação-hidrodinâmica" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="o-efeito-de-interação-hidrodinâmica"><span class="header-section-number">2.1.1</span> O Efeito de Interação Hidrodinâmica</h3>
<p>O principal desafio na modelagem de fazendas de ondas (<em>WEC Farms</em>) é o <strong>Efeito Wake (Esteira)</strong>. Assim como em parques eólicos, quando um conversor extrai energia de uma onda, ele cria uma “sombra” ou zona de menor energia atrás de si, alterando o recurso disponível para os conversores vizinhos.</p>
<p>A potência total (<span class="math inline">\(Powerall\)</span>) é uma soma linear das potências individuais em isolamento, porém o posicionamento dos <strong>WECs</strong> impacta diretamente a quantidade de energia gerada por <strong>WECs</strong> adjacentes.</p>
<p><span class="math display">\[Powerall = \sum_{i=1}^{16} P_i\]</span></p>
</section>
<section id="por-que-a-engenharia-de-atributos-é-vital-para-regressão-linear" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="por-que-a-engenharia-de-atributos-é-vital-para-regressão-linear"><span class="header-section-number">2.1.2</span> Por que a Engenharia de Atributos é Vital para Regressão Linear?</h3>
<p>Modelos de Regressão Linear assumem que a variável dependente é uma combinação linear das variáveis independentes. No entanto, as coordenadas puras (<span class="math inline">\(X, Y\)</span>) raramente têm uma relação linear direta com a potência. Ao extrair métricas como <strong>distância ao centroide</strong> e <strong>distância mínima</strong>, estamos:</p>
<ul>
<li><strong>Capturando Não-Linearidades:</strong> A distância euclidiana (que envolve termos quadráticos e raízes) “pré-processa” a geometria para o modelo, permitindo que a regressão linear encontre coeficientes significativos para a dispersão espacial.</li>
<li><strong>Tratando a Invariância Espacial:</strong> O modelo passa a entender a relação <em>entre</em> os WECs, em vez de apenas suas posições absolutas no mapa.</li>
</ul>
<hr>
</section>
</section>
</section>
<section id="pipeline-de-processamento-e-engenharia-de-atributos" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Pipeline de Processamento e Engenharia de Atributos</h1>
<section id="leitura-e-consolidação-dos-dados" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="leitura-e-consolidação-dos-dados"><span class="header-section-number">3.1</span> Leitura e Consolidação dos Dados</h2>
<ul>
<li>Leitura dos arquivos CSV brutos para cada cenário (<em>Adelaide</em>, <em>Tasmania</em>, <em>Sydney</em>, <em>Perth</em>).</li>
<li>Atribuição de nomes de colunas e adição de uma coluna <code>scenario</code> para identificar a origem dos dados.</li>
<li>Salvamento em formato <code>.parquet</code> para otimização de leitura e escrita.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>BASE_DIR <span class="op">=</span> Path().resolve().parent</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>RAW_DIR <span class="op">=</span> BASE_DIR <span class="op">/</span> <span class="st">"data"</span> <span class="op">/</span> <span class="st">"raw"</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>PROCESSED_DIR <span class="op">=</span> BASE_DIR <span class="op">/</span> <span class="st">"data"</span> <span class="op">/</span> <span class="st">"processed"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>PROCESSED_DIR.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> {</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Adelaide"</span>: <span class="st">"Adelaide_Data.csv"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tasmania"</span>: <span class="st">"Tasmania_Data.csv"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sydney"</span>: <span class="st">"Sydney_Data.csv"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Perth"</span>: <span class="st">"Perth_Data.csv"</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>x_cols <span class="op">=</span> [<span class="ss">f"X</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">17</span>)]</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>y_cols <span class="op">=</span> [<span class="ss">f"Y</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">17</span>)]</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>p_cols <span class="op">=</span> [<span class="ss">f"P</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">17</span>)]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> x_cols <span class="op">+</span> y_cols <span class="op">+</span> p_cols <span class="op">+</span> [<span class="st">"Powerall"</span>]</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>dfs <span class="op">=</span> []</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> scenario, filename <span class="kw">in</span> files.items():</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(RAW_DIR <span class="op">/</span> filename, header<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> columns</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"scenario"</span>] <span class="op">=</span> scenario</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    output_path <span class="op">=</span> PROCESSED_DIR <span class="op">/</span> <span class="ss">f"</span><span class="sc">{</span>scenario<span class="sc">.</span>lower()<span class="sc">}</span><span class="ss">.parquet"</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    df.to_parquet(output_path, index<span class="op">=</span><span class="va">False</span>, engine<span class="op">=</span><span class="st">"fastparquet"</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>scenario<span class="sc">}</span><span class="ss"> salvo em </span><span class="sc">{</span>output_path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    dfs.append(df)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Adelaide salvo em C:\Users\Muniz\OneDrive\Documentos\Academico\DL\P1_RL\data\processed\adelaide.parquet
Tasmania salvo em C:\Users\Muniz\OneDrive\Documentos\Academico\DL\P1_RL\data\processed\tasmania.parquet
Sydney salvo em C:\Users\Muniz\OneDrive\Documentos\Academico\DL\P1_RL\data\processed\sydney.parquet
Perth salvo em C:\Users\Muniz\OneDrive\Documentos\Academico\DL\P1_RL\data\processed\perth.parquet</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>wec_all <span class="op">=</span> pd.concat(dfs, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>output_path <span class="op">=</span> PROCESSED_DIR <span class="op">/</span> <span class="st">"wec_all.parquet"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>wec_all.to_parquet(output_path, index<span class="op">=</span><span class="va">False</span>, engine<span class="op">=</span><span class="st">"fastparquet"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Dataset final salvo em: </span><span class="sc">{</span>output_path<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Dataset final salvo em: C:\Users\Muniz\OneDrive\Documentos\Academico\DL\P1_RL\data\processed\wec_all.parquet</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Shape final: </span><span class="sc">{</span>wec_all<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Shape final: (287999, 50)</code></pre>
</div>
</div>
</section>
<section id="remoção-de-colunas-de-potência-individual" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="remoção-de-colunas-de-potência-individual"><span class="header-section-number">3.2</span> Remoção de Colunas de Potência Individual</h2>
<ol type="1">
<li><p>A decisão de remover as colunas <code>P1</code> a <code>P16</code> foi tomada para evitar que o modelo de regressão linear se torne dependente das potências individuais, que não estarão disponíveis em um cenário de previsão real. O foco é extrair informações geométricas dos WECs, como suas posições relativas, para prever a potência total <code>Powerall</code>.</p></li>
<li><p>Evitar a multicolinearidade: As potências individuais estão altamente correlacionadas com a potência total, o que pode levar a problemas de <em>Dataleakage</em>, já que:</p></li>
</ol>
<p><span class="math display">\[Powerall = \sum_{i=1}^{16} P_i\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_parquet(PROCESSED_DIR <span class="op">/</span> <span class="st">"wec_all.parquet"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>p_cols <span class="op">=</span> [<span class="ss">f"P</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">17</span>)]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>df.drop(columns<span class="op">=</span>p_cols, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">X1</th>
<th data-quarto-table-cell-role="th">X2</th>
<th data-quarto-table-cell-role="th">X3</th>
<th data-quarto-table-cell-role="th">X4</th>
<th data-quarto-table-cell-role="th">X5</th>
<th data-quarto-table-cell-role="th">X6</th>
<th data-quarto-table-cell-role="th">X7</th>
<th data-quarto-table-cell-role="th">X8</th>
<th data-quarto-table-cell-role="th">X9</th>
<th data-quarto-table-cell-role="th">X10</th>
<th data-quarto-table-cell-role="th">X11</th>
<th data-quarto-table-cell-role="th">X12</th>
<th data-quarto-table-cell-role="th">X13</th>
<th data-quarto-table-cell-role="th">X14</th>
<th data-quarto-table-cell-role="th">X15</th>
<th data-quarto-table-cell-role="th">X16</th>
<th data-quarto-table-cell-role="th">Y1</th>
<th data-quarto-table-cell-role="th">Y2</th>
<th data-quarto-table-cell-role="th">Y3</th>
<th data-quarto-table-cell-role="th">Y4</th>
<th data-quarto-table-cell-role="th">Y5</th>
<th data-quarto-table-cell-role="th">Y6</th>
<th data-quarto-table-cell-role="th">Y7</th>
<th data-quarto-table-cell-role="th">Y8</th>
<th data-quarto-table-cell-role="th">Y9</th>
<th data-quarto-table-cell-role="th">Y10</th>
<th data-quarto-table-cell-role="th">Y11</th>
<th data-quarto-table-cell-role="th">Y12</th>
<th data-quarto-table-cell-role="th">Y13</th>
<th data-quarto-table-cell-role="th">Y14</th>
<th data-quarto-table-cell-role="th">Y15</th>
<th data-quarto-table-cell-role="th">Y16</th>
<th data-quarto-table-cell-role="th">Powerall</th>
<th data-quarto-table-cell-role="th">scenario</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>316.5855</td>
<td>223.9277</td>
<td>182.3434</td>
<td>551.5497</td>
<td>7.8641</td>
<td>243.1339</td>
<td>361.0877</td>
<td>115.9284</td>
<td>78.6087</td>
<td>468.3799</td>
<td>362.6036</td>
<td>1.6865</td>
<td>508.6837</td>
<td>446.6440</td>
<td>385.7292</td>
<td>522.1661</td>
<td>180.9224</td>
<td>366.9186</td>
<td>200.9217</td>
<td>436.4863</td>
<td>189.6325</td>
<td>218.9722</td>
<td>247.9875</td>
<td>269.9356</td>
<td>495.7867</td>
<td>105.5203</td>
<td>141.8014</td>
<td>18.7857</td>
<td>496.6488</td>
<td>3.2835</td>
<td>513.9628</td>
<td>105.5529</td>
<td>1370374.145</td>
<td>Adelaide</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>530.3136</td>
<td>68.7031</td>
<td>31.5983</td>
<td>175.2582</td>
<td>516.1441</td>
<td>63.4652</td>
<td>67.0954</td>
<td>369.4486</td>
<td>14.0930</td>
<td>375.4462</td>
<td>45.4747</td>
<td>361.9118</td>
<td>297.8632</td>
<td>293.7442</td>
<td>90.5536</td>
<td>3.4209</td>
<td>510.7784</td>
<td>564.9436</td>
<td>324.5823</td>
<td>94.5002</td>
<td>424.1370</td>
<td>400.1397</td>
<td>107.3907</td>
<td>248.7212</td>
<td>415.6457</td>
<td>410.1439</td>
<td>156.3712</td>
<td>532.9900</td>
<td>280.7516</td>
<td>559.2803</td>
<td>208.7441</td>
<td>531.3943</td>
<td>1340929.765</td>
<td>Adelaide</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>27.3967</td>
<td>399.0488</td>
<td>565.6854</td>
<td>394.0466</td>
<td>120.2245</td>
<td>558.1293</td>
<td>546.4520</td>
<td>27.3256</td>
<td>314.1051</td>
<td>235.9476</td>
<td>514.9275</td>
<td>26.3633</td>
<td>332.2882</td>
<td>518.8260</td>
<td>494.6027</td>
<td>514.5393</td>
<td>102.5081</td>
<td>221.2811</td>
<td>303.2901</td>
<td>378.8741</td>
<td>85.5374</td>
<td>90.2488</td>
<td>516.1118</td>
<td>498.6277</td>
<td>435.2397</td>
<td>35.5588</td>
<td>148.9206</td>
<td>48.0585</td>
<td>317.9832</td>
<td>26.8732</td>
<td>483.0186</td>
<td>359.0875</td>
<td>1352031.511</td>
<td>Adelaide</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>346.1526</td>
<td>59.6375</td>
<td>226.2742</td>
<td>280.9095</td>
<td>402.2161</td>
<td>218.7181</td>
<td>207.0407</td>
<td>339.5676</td>
<td>0.0000</td>
<td>0.0000</td>
<td>175.5163</td>
<td>365.7745</td>
<td>565.6854</td>
<td>179.4148</td>
<td>155.1914</td>
<td>565.6854</td>
<td>441.9194</td>
<td>560.6924</td>
<td>0.0000</td>
<td>565.6854</td>
<td>424.9487</td>
<td>429.6600</td>
<td>176.7005</td>
<td>217.2239</td>
<td>562.7245</td>
<td>347.2173</td>
<td>0.0000</td>
<td>272.3906</td>
<td>178.4930</td>
<td>317.5044</td>
<td>235.5983</td>
<td>19.6762</td>
<td>1396754.375</td>
<td>Adelaide</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>317.9144</td>
<td>551.8542</td>
<td>335.4745</td>
<td>40.0240</td>
<td>316.6285</td>
<td>365.6434</td>
<td>416.3060</td>
<td>562.1028</td>
<td>211.3577</td>
<td>143.1255</td>
<td>516.7467</td>
<td>288.3794</td>
<td>54.9749</td>
<td>38.8434</td>
<td>193.8276</td>
<td>138.5265</td>
<td>94.6465</td>
<td>256.6874</td>
<td>434.6103</td>
<td>114.7701</td>
<td>0.0000</td>
<td>143.9788</td>
<td>337.7052</td>
<td>536.6741</td>
<td>143.3888</td>
<td>48.6452</td>
<td>109.5254</td>
<td>377.3113</td>
<td>530.8384</td>
<td>463.1129</td>
<td>42.6895</td>
<td>367.9045</td>
<td>1355708.577</td>
<td>Adelaide</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">287994</th>
<td>19.5135</td>
<td>478.6166</td>
<td>148.2143</td>
<td>450.2319</td>
<td>125.6785</td>
<td>70.9718</td>
<td>565.6854</td>
<td>37.7842</td>
<td>544.1133</td>
<td>236.7326</td>
<td>4.1684</td>
<td>61.2334</td>
<td>553.5673</td>
<td>95.4607</td>
<td>66.5839</td>
<td>180.4742</td>
<td>188.5023</td>
<td>531.5100</td>
<td>301.6850</td>
<td>16.3015</td>
<td>440.4696</td>
<td>404.8283</td>
<td>117.5421</td>
<td>12.4275</td>
<td>543.3555</td>
<td>507.7054</td>
<td>565.6854</td>
<td>565.6854</td>
<td>0.0000</td>
<td>527.8173</td>
<td>466.4224</td>
<td>0.0000</td>
<td>1402661.032</td>
<td>Perth</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">287995</th>
<td>333.6787</td>
<td>455.1773</td>
<td>432.5572</td>
<td>191.2960</td>
<td>556.6596</td>
<td>565.6854</td>
<td>76.3422</td>
<td>474.0408</td>
<td>133.7307</td>
<td>530.5940</td>
<td>512.7716</td>
<td>46.9926</td>
<td>123.3030</td>
<td>545.3711</td>
<td>358.2544</td>
<td>471.9163</td>
<td>490.0271</td>
<td>42.2444</td>
<td>496.7988</td>
<td>451.0021</td>
<td>3.7970</td>
<td>565.6854</td>
<td>96.0607</td>
<td>189.1050</td>
<td>565.6854</td>
<td>162.2300</td>
<td>232.4640</td>
<td>18.7375</td>
<td>487.2516</td>
<td>312.2023</td>
<td>3.5682</td>
<td>280.5183</td>
<td>1371938.375</td>
<td>Perth</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">287996</th>
<td>439.0799</td>
<td>281.9677</td>
<td>124.0780</td>
<td>403.3259</td>
<td>263.5955</td>
<td>67.5702</td>
<td>469.8106</td>
<td>97.9994</td>
<td>302.2266</td>
<td>210.1420</td>
<td>143.5943</td>
<td>180.8595</td>
<td>515.4032</td>
<td>202.4572</td>
<td>128.4527</td>
<td>78.4730</td>
<td>121.2716</td>
<td>426.1398</td>
<td>118.4704</td>
<td>220.5359</td>
<td>370.3263</td>
<td>364.8957</td>
<td>208.4444</td>
<td>8.0888</td>
<td>60.4651</td>
<td>315.6591</td>
<td>521.4316</td>
<td>424.5841</td>
<td>86.7144</td>
<td>220.0558</td>
<td>434.1959</td>
<td>176.9434</td>
<td>1344431.112</td>
<td>Perth</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">287997</th>
<td>36.1101</td>
<td>457.2237</td>
<td>359.1680</td>
<td>34.9338</td>
<td>543.2708</td>
<td>565.6854</td>
<td>381.4169</td>
<td>409.9652</td>
<td>73.8620</td>
<td>239.3023</td>
<td>254.4581</td>
<td>50.5293</td>
<td>170.7849</td>
<td>526.3237</td>
<td>507.3541</td>
<td>392.7777</td>
<td>227.0597</td>
<td>18.2085</td>
<td>519.7167</td>
<td>438.9683</td>
<td>0.0000</td>
<td>471.3834</td>
<td>176.9655</td>
<td>512.3731</td>
<td>505.1183</td>
<td>420.2044</td>
<td>194.6653</td>
<td>381.8094</td>
<td>491.8123</td>
<td>420.8932</td>
<td>508.6233</td>
<td>363.9954</td>
<td>1392385.246</td>
<td>Perth</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">287998</th>
<td>329.7393</td>
<td>498.9516</td>
<td>183.7059</td>
<td>455.2799</td>
<td>0.0000</td>
<td>71.6083</td>
<td>535.8469</td>
<td>16.7191</td>
<td>561.2334</td>
<td>492.7963</td>
<td>565.6854</td>
<td>16.8368</td>
<td>531.6753</td>
<td>109.2759</td>
<td>236.5937</td>
<td>352.1168</td>
<td>549.6675</td>
<td>524.0738</td>
<td>120.1026</td>
<td>71.1857</td>
<td>512.2242</td>
<td>62.4584</td>
<td>287.0139</td>
<td>117.6567</td>
<td>498.6035</td>
<td>233.9149</td>
<td>348.4920</td>
<td>357.7752</td>
<td>29.7426</td>
<td>309.7273</td>
<td>129.8734</td>
<td>207.5354</td>
<td>1385080.145</td>
<td>Perth</td>
</tr>
</tbody>
</table>

<p>287999 rows × 34 columns</p>
</div>
</div>
</div>
</section>
<section id="análise-exploratória-e-visualização" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="análise-exploratória-e-visualização"><span class="header-section-number">3.3</span> Análise Exploratória e Visualização</h2>
<p>Nesta etapa, realizamos uma análise exploratória dos dados para entender a estrutura, identificar valores faltantes e visualizar a disposição dos WECs no plano cartesiano.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_columns'</span>, <span class="va">None</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.shape, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>(287999, 34) </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.info(), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.DataFrame'&gt;
RangeIndex: 287999 entries, 0 to 287998
Data columns (total 34 columns):
 #   Column    Non-Null Count   Dtype  
---  ------    --------------   -----  
 0   X1        287999 non-null  float64
 1   X2        287999 non-null  float64
 2   X3        287999 non-null  float64
 3   X4        287999 non-null  float64
 4   X5        287999 non-null  float64
 5   X6        287999 non-null  float64
 6   X7        287999 non-null  float64
 7   X8        287999 non-null  float64
 8   X9        287999 non-null  float64
 9   X10       287999 non-null  float64
 10  X11       287999 non-null  float64
 11  X12       287999 non-null  float64
 12  X13       287999 non-null  float64
 13  X14       287999 non-null  float64
 14  X15       287999 non-null  float64
 15  X16       287999 non-null  float64
 16  Y1        287999 non-null  float64
 17  Y2        287999 non-null  float64
 18  Y3        287999 non-null  float64
 19  Y4        287999 non-null  float64
 20  Y5        287999 non-null  float64
 21  Y6        287999 non-null  float64
 22  Y7        287999 non-null  float64
 23  Y8        287999 non-null  float64
 24  Y9        287999 non-null  float64
 25  Y10       287999 non-null  float64
 26  Y11       287999 non-null  float64
 27  Y12       287999 non-null  float64
 28  Y13       287999 non-null  float64
 29  Y14       287999 non-null  float64
 30  Y15       287999 non-null  float64
 31  Y16       287999 non-null  float64
 32  Powerall  287999 non-null  float64
 33  scenario  287999 non-null  object 
dtypes: float64(33), object(1)
memory usage: 74.7+ MB
None </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Valores faltantes (NAs):</span><span class="ch">\n</span><span class="st">"</span>, df.isnull().<span class="bu">sum</span>(), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Valores faltantes (NAs):
 X1          0
X2          0
X3          0
X4          0
X5          0
X6          0
X7          0
X8          0
X9          0
X10         0
X11         0
X12         0
X13         0
X14         0
X15         0
X16         0
Y1          0
Y2          0
Y3          0
Y4          0
Y5          0
Y6          0
Y7          0
Y8          0
Y9          0
Y10         0
Y11         0
Y12         0
Y13         0
Y14         0
Y15         0
Y16         0
Powerall    0
scenario    0
dtype: int64 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Moda por coluna:</span><span class="ch">\n</span><span class="st">"</span>, df.mode().iloc[<span class="dv">0</span>])</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Moda por coluna:
 X1                566.0
X2                  0.0
X3                  0.0
X4                  0.0
X5                  0.0
X6                  0.0
X7                  0.0
X8                  0.0
X9                  0.0
X10                 0.0
X11                 0.0
X12                 0.0
X13                 0.0
X14                 0.0
X15                 0.0
X16               566.0
Y1                  0.0
Y2                  0.0
Y3                  0.0
Y4                  0.0
Y5                  0.0
Y6                566.0
Y7                  0.0
Y8                  0.0
Y9                  0.0
Y10                 0.0
Y11                 0.0
Y12                 0.0
Y13                 0.0
Y14                 0.0
Y15                 0.0
Y16                 0.0
Powerall    1296398.282
scenario          Perth
Name: 0, dtype: object</code></pre>
</div>
</div>
<section id="conclusões-pós-análise-superficiais" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="conclusões-pós-análise-superficiais"><span class="header-section-number">3.3.1</span> Conclusões pós Análise Superficiais</h3>
<ol type="1">
<li>O dataset consolidado contém <strong>287.999</strong> linhas e <strong>49</strong> colunas, sem valores faltantes.</li>
<li>A maior parte das colunas de coordenadas (<code>X1</code> a <code>Y16</code>) tem uma moda de 0 ou 566, indicando que muitos WECs estão posicionados em coordenadas próximas ou idênticas, o que pode sugerir agrupamentos ou padrões de arranjo específicos.</li>
</ol>
</section>
</section>
<section id="visualização-da-disposição-dos-wecs" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="visualização-da-disposição-dos-wecs"><span class="header-section-number">3.4</span> Visualização da Disposição dos WECs</h2>
<section id="o-que-é-um-wec" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="o-que-é-um-wec"><span class="header-section-number">3.4.1</span> O que é um <strong>WEC</strong>?</h3>
<p><em>WECs</em> (Wave Energy Converters) são dispositivos projetados para <strong>converter a energia das ondas em eletricidade</strong>. Eles podem assumir diferentes formatos, como:</p>
<ul>
<li><strong>Bóias flutuantes:</strong> Capturam energia a partir do movimento vertical das ondas.</li>
<li><strong>Colunas oscilantes:</strong> Estruturas fixas ou semi-flutuantes que se movem com a pressão ou deslocamento da água.</li>
<li><strong>Plataformas flutuantes:</strong> Sistemas maiores, capazes de gerar mais energia em conjunto.</li>
</ul>
<p>A posição de cada WEC dentro de uma fazenda de ondas é <strong>crucial</strong>, pois o arranjo influencia diretamente a eficiência energética. Certos padrões podem <strong>minimizar interferências hidrodinâmicas</strong> e maximizar a captura de energia de cada dispositivo.</p>
<p><img src="images/PRIMRE-Flap.webp" class="img-fluid quarto-figure quarto-figure-left" width="266"> <img src="images/point-absorber1.gif" class="img-fluid quarto-figure quarto-figure-right" width="333"></p>
<p>Abaixo, apresentamos uma <strong>visualização do layout de uma fazenda de WECs</strong>, mostrando diferentes formas de posicionamento. Essa visualização ajuda a compreender como <strong>a distribuição espacial afeta a eficiência global</strong>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>random_idx <span class="op">=</span> np.random.randint(<span class="dv">0</span>, <span class="bu">len</span>(df))</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>x_values <span class="op">=</span> df[[<span class="ss">f"X</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">17</span>)]].iloc[random_idx].values</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>y_values <span class="op">=</span> df[[<span class="ss">f"Y</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">17</span>)]].iloc[random_idx].values</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>,<span class="dv">6</span>))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>plt.scatter(x_values, y_values, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">16</span>):</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    plt.text(x_values[i], y_values[i], <span class="ss">f"WEC</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">0</span>, <span class="dv">566</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>(0.0, 566.0)</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">566</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>(0.0, 566.0)</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plt.gca().set_aspect(<span class="st">'equal'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Exemplo de Layout de WECs"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Coordenada X (m)"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Coordenada Y (m)"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ganhos-e-insights-possíveis-com-diferentes-arranjos" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="ganhos-e-insights-possíveis-com-diferentes-arranjos"><span class="header-section-number">3.5</span> Ganhos e insights possíveis com diferentes arranjos:</h2>
<ul>
<li><strong>Disposição regular:</strong> Reduz interferências entre WECs, facilita manutenção e controle.</li>
<li><strong>Disposição escalonada ou hexagonal:</strong> Aumenta a densidade de energia capturada e reduz sombras hidrodinâmicas.</li>
<li><strong>Arranjos adaptativos:</strong> Baseados em modelagem computacional ou simulação de ondas para maximizar a eficiência energética.</li>
</ul>
</section>
</section>
<section id="criação-de-novas-features" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Criação de Novas Features</h1>
<p>Nesta etapa, calculamos métricas geométricas a partir das coordenadas dos WECs para capturar a disposição espacial e as interações hidrodinâmicas:</p>
<ul>
<li><strong>Distâncias Mínimas entre WECs:</strong> Calcula as distâncias entre</li>
<li><strong>Distância ao Centroide:</strong> Calcula a distância de cada WEC ao centroide do arranjo, fornecendo uma medida de dispersão espacial.</li>
</ul>
<hr>
<section id="distância-euclidiana-entre-wecs" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="distância-euclidiana-entre-wecs"><span class="header-section-number">4.1</span> Distância Euclidiana entre WECs</h2>
<section id="o-que-é" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="o-que-é"><span class="header-section-number">4.1.1</span> O que é?</h3>
<p>A <strong>distância euclidiana</strong> é a maneira mais direta de medir a separação entre dois pontos em um plano 2D. No contexto das fazendas de <strong>Wave Energy Converters (WECs)</strong>, ela nos permite quantificar <strong>o espaço físico entre cada par de dispositivos</strong>, que é essencial para analisar interferências hidrodinâmicas e eficiência energética.</p>
<hr>
</section>
<section id="fórmula-matemática" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="fórmula-matemática"><span class="header-section-number">4.1.2</span> Fórmula Matemática</h3>
<p>Para dois pontos <span class="math inline">\((i\)</span>) e <span class="math inline">\((j)\)</span> com coordenadas <span class="math inline">\((X_i, Y_i)\)</span> e <span class="math inline">\((X_j, Y_j)\)</span>, a distância euclidiana é calculada como:</p>
<p><span class="math inline">\(d_{ij} = \sqrt{(X_i - X_j)^2 + (Y_i - Y_j)^2}, \quad i,j = 1,2,...,N, \quad i &lt; j\)</span></p>
<p>Onde:</p>
<ul>
<li><p><span class="math inline">\((N)\)</span> é o número total de WECs em uma fazenda.</p></li>
<li><p><span class="math inline">\((d_{ij})\)</span> é a <strong>distância direta “linha reta”</strong> entre o WEC <span class="math inline">\((i)\)</span> e o WEC <span class="math inline">\((j)\)</span>.</p></li>
</ul>
<hr>
</section>
<section id="como-o-código-escolhe-os-pontos" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="como-o-código-escolhe-os-pontos"><span class="header-section-number">4.1.3</span> Como o código escolhe os pontos?</h3>
<ol type="1">
<li><strong>Seleção dos pontos:</strong> Cada linha do dataframe representa <strong>uma configuração da fazenda de WECs</strong>. Para essa linha, o código cria uma lista de <strong>tuplas</strong> de coordenadas:</li>
</ol>
<p><span class="math inline">\(coords = [(X_1, Y_1), (X_2, Y_2), ..., (X_N, Y_N)]\)</span></p>
<ul>
<li><p><strong>Gerando pares de WECs:</strong> Usamos <code>combinations(coords, 2)</code> do Python, que gera <strong>todos os pares possíveis de WECs sem repetição</strong>.</p></li>
<li><p>Para 16 WECs, isso resulta em <span class="math inline">\((\binom{16}{2} = 120)\)</span> pares.</p></li>
<li><p>Cada par é do tipo <span class="math inline">\((X_i, Y_i), (X_j, Y_j)\)</span>.</p></li>
<li><p><strong>Cálculo da distância:</strong> Para cada par, aplica-se a fórmula da distância euclidiana:</p></li>
</ul>
<p><span class="math inline">\(d_{ij} = \sqrt{(X_i - X_j)^2 + (Y_i - Y_j)^2}\)</span></p>
<p>O resultado é uma <strong>lista com todas as distâncias entre pares</strong>, que representa o “mapa de separações” da fazenda.</p>
<hr>
</section>
<section id="estatísticas-derivadas" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="estatísticas-derivadas"><span class="header-section-number">4.1.4</span> Estatísticas derivadas</h3>
<p>A partir das distâncias entre todos os pares, podemos extrair métricas que descrevem o layout da fazenda:</p>
<ul>
<li><strong>Média:</strong></li>
</ul>
<p><span class="math inline">\(\bar{d} = \frac{1}{M} \sum_{i&lt;j} d_{ij}, \quad M = \binom{N}{2}\)</span></p>
<p>Por que a média é representada assim?</p>
<ul>
<li><p><span class="math inline">\((M = \binom{N}{2} = \frac{N(N-1)}{2})\)</span> é o <strong>número total de pares únicos</strong>.</p></li>
<li><p>O somatório <span class="math inline">\((\sum_{i&lt;j} d_{ij})\)</span> adiciona <strong>todas as distâncias entre pares únicos</strong>.</p></li>
<li><p>Dividindo pelo total de pares <span class="math inline">\((M)\)</span>, obtemos a <strong>distância média entre todos os WECs</strong>, que representa o <strong>espaçamento médio da fazenda</strong>.</p></li>
<li><p><strong>Mínimo:</strong></p></li>
</ul>
<p><span class="math inline">\(d_{min} = \min(d_{ij})\)</span></p>
<ul>
<li><strong>Máximo:</strong></li>
</ul>
<p><span class="math inline">\(d_{max} = \max(d_{ij})\)</span></p>
<ul>
<li><strong>Desvio padrão:</strong></li>
</ul>
<p><span class="math inline">\(\sigma_d = \sqrt{\frac{1}{M} \sum_{i&lt;j} (d_{ij} - \bar{d})^2}\)</span></p>
<p>Estas estatísticas permitem avaliar:</p>
<ul>
<li><strong>Proximidade crítica entre WECs</strong> (evitar interferência hidrodinâmica).</li>
<li><strong>Uniformidade do layout</strong> (distribuição regular ou concentrada).</li>
<li><strong>Potencial de eficiência energética</strong> baseado na posição relativa dos dispositivos.</li>
</ul>
<hr>
</section>
<section id="por-que-é-importante" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="por-que-é-importante"><span class="header-section-number">4.1.5</span> Por que é importante?</h3>
<ol type="1">
<li><p><strong>Evitar interferências entre WECs:</strong> Dispositivos muito próximos podem “sombrear” uns aos outros, reduzindo a eficiência da captura de energia.</p></li>
<li><p><strong>Caracterizar o layout da fazenda:</strong> A distância média e o desvio padrão ajudam a identificar padrões espaciais, como agrupamentos ou dispersão uniforme.</p></li>
<li><p><strong>Fornecer features para modelos de predição:</strong> Estatísticas das distâncias podem ser usadas como <strong>entradas em modelos de regressão ou machine learning</strong>, ajudando a prever a potência total gerada (<code>Powerall</code>).</p></li>
</ol>
<hr>
</section>
<section id="visualização-intuitiva" class="level3" data-number="4.1.6">
<h3 data-number="4.1.6" class="anchored" data-anchor-id="visualização-intuitiva"><span class="header-section-number">4.1.6</span> Visualização Intuitiva</h3>
<p>Se representarmos cada WEC como um ponto em um plano 2D, a distância euclidiana é a <strong>linha reta</strong> que conecta dois pontos, sem se importar com o caminho das ondas ou obstáculos. Para todos os pares, podemos pensar em uma <strong>“rede de linhas”</strong> conectando cada dispositivo a todos os outros.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>n_wecs <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>x_cols <span class="op">=</span> [<span class="ss">f"X</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_wecs<span class="op">+</span><span class="dv">1</span>)]</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>y_cols <span class="op">=</span> [<span class="ss">f"Y</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_wecs<span class="op">+</span><span class="dv">1</span>)]</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> euclidean_distance(x1, y1, x2, y2):</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.sqrt((x1 <span class="op">-</span> x2)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (y1 <span class="op">-</span> y2)<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pairwise_distances(row):</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    coords <span class="op">=</span> [(row[x_cols[i]], row[y_cols[i]]) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_wecs)]</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    dists <span class="op">=</span> [euclidean_distance(x1, y1, x2, y2) </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>             <span class="cf">for</span> (x1, y1), (x2, y2) <span class="kw">in</span> combinations(coords, <span class="dv">2</span>)]</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dists</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'pairwise_distances'</span>] <span class="op">=</span> df.<span class="bu">apply</span>(pairwise_distances, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'dist_mean'</span>] <span class="op">=</span> df[<span class="st">'pairwise_distances'</span>].<span class="bu">apply</span>(np.mean)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'dist_min'</span>] <span class="op">=</span> df[<span class="st">'pairwise_distances'</span>].<span class="bu">apply</span>(np.<span class="bu">min</span>)</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'dist_max'</span>] <span class="op">=</span> df[<span class="st">'pairwise_distances'</span>].<span class="bu">apply</span>(np.<span class="bu">max</span>)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'dist_std'</span>] <span class="op">=</span> df[<span class="st">'pairwise_distances'</span>].<span class="bu">apply</span>(np.std)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[[<span class="st">'dist_mean'</span>,<span class="st">'dist_min'</span>,<span class="st">'dist_max'</span>,<span class="st">'dist_std'</span>]].head())</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    dist_mean   dist_min    dist_max    dist_std
0  318.669811  53.786210  696.706038  145.638849
1  316.501547  51.749881  614.241595  139.697244
2  346.026541  54.459406  699.690037  162.379271
3  331.598578  50.757900  784.156507  153.154218
4  328.617141  51.050694  671.244559  145.095922</code></pre>
</div>
</div>
</section>
</section>
<section id="distância-de-cada-wec-ao-centroide" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="distância-de-cada-wec-ao-centroide"><span class="header-section-number">4.2</span> Distância de cada WEC ao Centroide</h2>
<section id="o-que-é-o-centroide" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="o-que-é-o-centroide"><span class="header-section-number">4.2.1</span> O que é o centroide?</h3>
<p>O <strong>centroide</strong> é o <strong>ponto médio</strong> de todos os WECs em uma fazenda, ou seja, o “coração geométrico” da configuração. Se temos <span class="math inline">\((N)\)</span> WECs com coordenadas <span class="math inline">\((X_i, Y_i)\)</span>, o centroide é calculado como:</p>
<p><span class="math inline">\(\text{centroid}_x = \frac{1}{N} \sum_{i=1}^{N} X_i, \quad\text{centroid}_y = \frac{1}{N} \sum_{i=1}^{N} Y_i\)</span></p>
<ul>
<li>((_x, _y)) representa <strong>a posição média de todos os WECs</strong>.</li>
<li>Ele é usado como referência para avaliar <strong>quão dispersos ou concentrados estão os WECs</strong>.</li>
</ul>
<hr>
</section>
<section id="distância-de-cada-wec-até-o-centroide" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="distância-de-cada-wec-até-o-centroide"><span class="header-section-number">4.2.2</span> Distância de cada WEC até o centroide</h3>
<p>Para cada WEC <span class="math inline">\((i)\)</span>, a distância ao centroide é:</p>
<p><span class="math inline">\(d_i^{\text{centroid}} = \sqrt{(X_i - \text{centroid}_x)^2 + (Y_i - \text{centroid}_y)^2}, \quad i = 1, 2, ..., N\)</span></p>
<ul>
<li>Cada WEC é comparado <strong>apenas com o centroide</strong>.</li>
<li>O cálculo é novamente <strong>uma hipotenusa</strong> de um triângulo retângulo formado pela diferença de coordenadas X e Y do WEC até o centroide.</li>
</ul>
<hr>
</section>
<section id="estatísticas-derivadas-1" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="estatísticas-derivadas-1"><span class="header-section-number">4.2.3</span> Estatísticas derivadas</h3>
<p>Com a lista de distâncias <span class="math inline">\(({d_1^{\text{centroid}}, d_2^{\text{centroid}}, ..., d_N^{\text{centroid}}})\)</span> podemos calcular:</p>
<ul>
<li><strong>Distância média ao centroide:</strong></li>
</ul>
<p><span class="math inline">\(\bar{d}*{\text{centroid}} = \frac{1}{N} \sum_{i=1}^{N} d_i^{\text{centroid}}\)</span></p>
<ul>
<li><strong>Desvio padrão das distâncias ao centroide:</strong></li>
</ul>
<p><span class="math inline">\(\sigma_{\text{centroid}} = \sqrt{\frac{1}{N} \sum_{i=1}^{N} (d_i^{\text{centroid}} - \bar{d}_{\text{centroid}})^2}\)</span></p>
<p>Essas métricas permitem:</p>
<ol type="1">
<li><p>Avaliar a <strong>dispersão da fazenda</strong>:</p>
<ul>
<li><span class="math inline">\((\bar{d}_{\text{centroid}})\)</span> grande → WECs muito afastados do centro.</li>
<li><span class="math inline">\((\sigma_{\text{centroid}})\)</span> grande → WECs distribuídos de forma desigual.</li>
</ul></li>
<li><p>Criar <strong>features para modelagem preditiva</strong>, ajudando a explicar variações na potência gerada.</p></li>
</ol>
<hr>
</section>
<section id="por-que-é-diferente-da-distância-entre-pares" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="por-que-é-diferente-da-distância-entre-pares"><span class="header-section-number">4.2.4</span> Por que é diferente da distância entre pares?</h3>
<ul>
<li><p><strong>Distância entre pares:</strong> considera <strong>todos os pares possíveis de WECs</strong>, gerando <span class="math inline">\(\binom{N}{2}\)</span> valores.</p></li>
<li><p><strong>Distância até o centroide:</strong> considera <strong>cada WEC apenas em relação ao centro geométrico</strong>, gerando <span class="math inline">\((N)\)</span> valores.</p></li>
<li><p>Ambas ajudam a caracterizar a fazenda, mas o centroide <strong>resuma a posição global</strong> enquanto as distâncias entre pares <strong>resumem a interação local</strong>.</p></li>
</ul>
<hr>
</section>
<section id="visualização-intuitiva-1" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="visualização-intuitiva-1"><span class="header-section-number">4.2.5</span> Visualização Intuitiva</h3>
<p>Imagine uma fazenda com 16 WECs espalhados:</p>
<ul>
<li>O <strong>centroide</strong> é o ponto médio (como o <em>baricentro</em>) da distribuição.</li>
<li>Cada WEC está conectado ao centroide por uma <strong>linha reta</strong>, que é a hipotenusa do triângulo formado pelas diferenças de coordenadas X e Y.</li>
</ul>
<p>Isso dá uma ideia clara de <strong>quão centralizados ou dispersos os WECs estão</strong>.</p>
<hr>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'centroid_x'</span>] <span class="op">=</span> df[x_cols].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'centroid_y'</span>] <span class="op">=</span> df[y_cols].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dist_to_centroid(row):</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    centroid <span class="op">=</span> (row[<span class="st">'centroid_x'</span>], row[<span class="st">'centroid_y'</span>])</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    dists <span class="op">=</span> [euclidean_distance(row[x_cols[i]], row[y_cols[i]], <span class="op">*</span>centroid)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>             <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_wecs)]</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dists</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'dist_to_centroid'</span>] <span class="op">=</span> df.<span class="bu">apply</span>(dist_to_centroid, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'centroid_dist_mean'</span>] <span class="op">=</span> df[<span class="st">'dist_to_centroid'</span>].<span class="bu">apply</span>(np.mean)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'centroid_dist_std'</span>] <span class="op">=</span> df[<span class="st">'dist_to_centroid'</span>].<span class="bu">apply</span>(np.std)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">'pairwise_distances'</span>, <span class="st">'dist_to_centroid'</span>])</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[[<span class="st">'centroid_dist_mean'</span>,<span class="st">'centroid_dist_std'</span>]].head())</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   centroid_dist_mean  centroid_dist_std
0          216.708050         102.868349
1          229.015546          60.463932
2          242.446731          98.511988
3          227.486944         103.862523
4          232.300129          80.778165</code></pre>
</div>
</div>
</section>
</section>
<section id="matriz-de-correlação" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="matriz-de-correlação"><span class="header-section-number">4.3</span> “Matriz de Correlação”</h2>
<p>A matriz de correlação é uma ferramenta estatística que mostra a relação linear entre cada par de variáveis em um dataset. No contexto do nosso projeto, ela nos ajuda a entender como as novas features geométricas (como <code>dist_mean</code>, <code>dist_min</code>, <code>centroid_dist_mean</code>, etc.) estão relacionadas com a variável alvo <code>Powerall</code>. Foi utilizado ” ” porque não é uma matriz de correlação tradicional entre todas as variáveis, mas sim um gráfico de calor focado na correlação de cada feature com <code>Powerall</code>, já que a base de dados possui muitas colunas, e o objetivo é destacar a correlação de cada feature com a variável alvo.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleciona apenas as colunas numéricas</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>df_numeric <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>[np.number])</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcula a correlação com PowerAll</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>corr_with_target <span class="op">=</span> df_numeric.corr()[<span class="st">'Powerall'</span>].drop(<span class="st">'Powerall'</span>)  <span class="co"># remove a correlação consigo mesmo</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Converte para DataFrame para usar no heatmap</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>corr_df <span class="op">=</span> corr_with_target.to_frame().sort_values(by<span class="op">=</span><span class="st">'Powerall'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="bu">len</span>(corr_df)<span class="op">*</span><span class="fl">0.3</span>))  <span class="co"># ajusta altura dinamicamente</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr_df, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">".2f"</span>, cmap<span class="op">=</span><span class="st">"coolwarm"</span>, cbar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Correlação de cada feature com Powerall"</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data_processing_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<section id="interpretação-geral" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="interpretação-geral"><span class="header-section-number">4.3.1</span> Interpretação Geral</h3>
<p>A baixa magnitude das correlações reforça que <strong>a relação entre layout dos WECs e potência total é complexa e não-linear</strong>, justificando a necessidade de:</p>
<ul>
<li>Features derivadas (distâncias entre pares, distâncias ao centroide, métricas estatísticas).</li>
<li>Modelos mais sofisticados que capturem interações e efeitos não-lineares, como <strong>regressão polinomial ou modelos baseados em árvores</strong>.</li>
</ul>
<p>Em resumo, <strong>nenhuma feature isolada tem poder explicativo forte</strong>, mas a combinação de várias métricas espaciais pode fornecer insights importantes para previsão de <code>Powerall</code>.</p>
</section>
</section>
</section>
<section id="exportação-da-base-de-dados-tratada" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Exportação da Base de Dados Tratada</h1>
<ul>
<li>Novas Features Criadas para melhor desempenho do Modelo</li>
<li>Salvamento em formato <code>.parquet</code> para otimização de leitura e escrita.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>output_path <span class="op">=</span> PROCESSED_DIR <span class="op">/</span> <span class="st">"wec_all_processed.parquet"</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df.to_parquet(output_path, engine<span class="op">=</span><span class="st">"fastparquet"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Dataset Tratado salvo em: </span><span class="sc">{</span>output_path<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Dataset Tratado salvo em: C:\Users\Muniz\OneDrive\Documentos\Academico\DL\P1_RL\data\processed\wec_all_processed.parquet</code></pre>
</div>
</div>
<hr>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Referências</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="1" role="list">
<div id="ref-wave_energy_converters_494" class="csl-entry" role="listitem">
NESHAT, Mehdi; WAGNER, Markus; ALEXANDER, Bradley. <strong>Wave Energy Converters</strong>. UCI Machine Learning Repository, 2018.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>